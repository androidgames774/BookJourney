<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bookjorny - Progress Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f8f8f8; }
    .section { margin-bottom: 30px; }
    .progress-bar-bg {
      background: #ddd;
      border-radius: 6px;
      width: 300px;
      height: 24px;
      margin-right: 10px;
      display: inline-block;
      vertical-align: middle;
      cursor: pointer;
      position: relative;
    }
    .progress-bar-fill {
      background: #4caf50;
      height: 100%;
      border-radius: 6px 0 0 6px;
      transition: width 0.3s;
    }
    .progress-label { font-size: 15px; vertical-align: middle; }
    .daily-item {
      background: #fff;
      border-radius: 5px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.07);
      padding: 10px 15px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    #back-btn { margin-bottom: 20px; cursor: pointer; color: #2196f3; border:none; background:none; font-size:18px; }
    #daily-progress { display: none; }
    @media (max-width:400px) {
      .progress-bar-bg { width: 90vw; }
    }
  </style>
</head>
<body>
  <div id="dashboard" class="section">
    <h2>Book Progress Dashboard</h2>
    <div id="main-progress-bar" class="progress-bar-bg" title="Click for daily breakdown"></div>
    <span class="progress-label" id="progress-label"></span>
    <p>Click the progress bar to see daily breakdown.</p>
  </div>

  <div id="daily-progress" class="section">
    <button id="back-btn">&larr; Back to Dashboard</button>
    <h2>Daily Progress Breakdown</h2>
    <div id="daily-list"></div>
  </div>

  <script>
    // Dummy Data (replace with real data source)
    const totalPages = 120;
    const readingLog = [
      { date: "2025-10-20", pages: 10 },
      { date: "2025-10-21", pages: 0 },
      { date: "2025-10-22", pages: 5 },
      { date: "2025-10-23", pages: 15 },
      { date: "2025-10-24", pages: 12 },
      // add more days as needed
    ];
    // Calculate current total progress
    const totalRead = readingLog.reduce((sum, entry) => sum + entry.pages, 0);

    // Render main dashboard progress bar
    function renderDashboard() {
      document.getElementById("dashboard").style.display = "block";
      document.getElementById("daily-progress").style.display = "none";
      const bar = document.getElementById("main-progress-bar");
      const percent = totalRead / totalPages;
      bar.innerHTML = `<div class="progress-bar-fill" style="width:${percent*100}%"></div>`;
      document.getElementById("progress-label").textContent =
        `${totalRead} / ${totalPages} pages (${Math.round(percent*100)}%)`;
    }

    // Render daily breakdown page
    function renderDailyBreakdown() {
      document.getElementById("dashboard").style.display = "none";
      document.getElementById("daily-progress").style.display = "block";
      const dailyList = document.getElementById("daily-list");
      dailyList.innerHTML = "";

      // Find days between first and last log entry
      const start = new Date(readingLog[0].date);
      const end = new Date(readingLog[readingLog.length-1].date);
      const daysArr = [];
      for(let d=new Date(start); d<=end; d.setDate(d.getDate()+1)) {
        const dateStr = d.toISOString().slice(0,10);
        const entry = readingLog.find(e => e.date === dateStr);
        daysArr.push({ date: dateStr, pages: entry ? entry.pages : 0 });
      }

      let progressSoFar = 0;
      daysArr.forEach(day => {
        progressSoFar += day.pages;
        const percent = (day.pages && totalRead) ? day.pages / totalRead : 0;
        const bar = `<div class="progress-bar-bg" style="width:160px;">
          <div class="progress-bar-fill" style="width:${percent*100}%"></div>
        </div>`;
        dailyList.innerHTML +=
          `<div class="daily-item">
            <span>${day.date}</span>
            ${bar}
            <span>${day.pages} pages</span>
          </div>`;
      });
    }

    // Event listeners
    document.getElementById("main-progress-bar").onclick = renderDailyBreakdown;
    document.getElementById("back-btn").onclick = renderDashboard;

    // Initial render
    renderDashboard();
  </script>
</body>
</html>
